<!doctype html>
<html lang="zn">

<head>
	<meta charset="UTF-8">
</head>

<body>
	<div id="px-render"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.8.2/pixi.min.js"></script>
	<script src="https://www.kkkk1000.com/js/spriteUtilities.js"></script>
	<script src="https://www.kkkk1000.com/js/dust.js"></script>
	<script>
		//建立一個 Pixi應用 需要的一些引數
		let option = {
			width: 400,
			height: 300,
			transparent: true,
		}
		//建立一個 Pixi應用
		let app = new PIXI.Application(option);
		//獲取舞臺
		let stage = app.stage;
		//獲取渲染器
		let renderer = app.renderer;
		let playground = document.getElementById('px-render');
		//把 Pixi 建立的 canvas 新增到頁面上
		playground.appendChild(renderer.view);

		let su = new SpriteUtilities(PIXI);
		let d = new Dust(PIXI);
		let particleStream;

		//需要載入的圖片的地址
		let imgURL = "https://www.kkkk1000.com/images/learnPixiJS-ParticleEffects/star.png";
		//載入影象，載入完成後執行setup函式 
		PIXI.loader.add(imgURL).load(setup);

		function setup() {
			let particleStream = d.emitter(
				100,
				() => d.create(
					128, 128,
					() => su.sprite(imgURL),
					stage,
					30,
					0.1,
					false,
					3.14, 6.28,
					30, 60,
					1, 5
				)
			);

			particleStream.play();
			//開始遊戲迴圈
			gameLoop();
		}

		function gameLoop() {
			requestAnimationFrame(gameLoop);
			d.update();
			renderer.render(stage);
		}
	</script>
</body>

</html>